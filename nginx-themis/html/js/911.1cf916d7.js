"use strict";(self["webpackChunkthemis_vue"]=self["webpackChunkthemis_vue"]||[]).push([[911],{2911:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"right"},[e("div",{staticClass:"box3"},[e("label",{staticClass:"crimeTypeLable",attrs:{for:"crimeType"}},[t._v("犯罪类型:")]),t._m(0),e("a",{attrs:{href:"",download:""}}),e("span",{staticClass:"span1"},[t._v("凭证：")]),e("input",{staticClass:"upload-inputText1",attrs:{type:"text"}}),e("span",{staticClass:"span2"},[t._v("私钥：")]),e("input",{staticClass:"upload-inputText2",attrs:{type:"text"}}),e("span",{staticClass:"crimePosition"},[t._v("犯罪地点：")]),e("input",{staticClass:"upload-crimePosition",attrs:{type:"text"}}),e("span",{staticClass:"crimeDescript"},[t._v("犯罪描述：")]),e("input",{staticClass:"upload-crimeDescript",attrs:{type:"text"}}),e("input",{staticClass:"form-submit",attrs:{type:"submit",value:"请求"},on:{click:t.queryTr}})])])},r=[function(){var t=this,e=t._self._c;return e("select",{staticClass:"crimeTypeSelect",attrs:{id:"crimeType",name:"crimeType"}},[e("option",{attrs:{value:"偷窃"}},[t._v("偷窃")]),e("option",{attrs:{value:"抢劫"}},[t._v("抢劫")]),e("option",{attrs:{value:"强奸"}},[t._v("强奸")]),e("option",{attrs:{value:"谋杀"}},[t._v("谋杀")])])}],o=a(5531),i=a(8355),c={name:"DP-NewTr",data(){return{}},methods:{queryTr(){(0,i.A)({url:"/api/request",method:"post",headers:{token:sessionStorage.getItem("token")},data:{id:sessionStorage.getItem("userId"),cre:document.querySelector(".upload-inputText1").value,prk:document.querySelector(".upload-inputText2").value,type:document.querySelector(".crimeTypeSelect").value,spot:document.querySelector(".upload-crimePosition").value,desc:document.querySelector(".upload-crimeDescript").value}}).then((t=>{const e=t.data.code;if(0==e)this.$message.error("请求失败");else{const e=t.data.data.filepath;console.log(e),document.querySelector(".box3 a").href="/api/load/"+e,document.querySelector(".box3 a").download=e,document.querySelector(".box3 a").click();try{this.uploadBlock({type:t.data.data.tx,para1:t.data.data.para1,para2:t.data.data.para2,ts:t.data.data.ts,sign:t.data.data.sign})}catch{this.$message.error("上传区块失败")}}})).catch((()=>{this.$message.error("请求失败")}))},uploadBlock(t){const e=new o.Ay$(new o.Ay$.providers.HttpProvider("HTTP://127.0.0.1:7545"));e.eth.sendTransaction({from:"0x24F006B75F942466DCFD24Ba80a5E53744774B4C",to:"0xc2cC927D5865e02c3aDBc86687f2c2fFbEBfc687",value:1e15,gas:121e3,data:this.stringtoHex(JSON.stringify(t))}).then((function(t){console.log("交易状态：",t.status)}))},stringtoHex(t){for(var e="0x",a=0;a<t.length;a++)""==e?e=t.charCodeAt(a).toString(16):e+=t.charCodeAt(a).toString(16);return console.log(e),e}}},n=c,l=a(1656),u=(0,l.A)(n,s,r,!1,null,"a3ba99d0",null),p=u.exports}}]);
//# sourceMappingURL=911.1cf916d7.js.map